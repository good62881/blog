<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>文章管理</title>
</head>
<body>

<div id="app" v-cloak>
	<c-top ref="CTop" :user-info.sync="userInfo"></c-top>

	<el-row class="oh">
		<c-nav :now="navNow"></c-nav>
		
			
			
		
		<router-view></router-view>
	</el-row>

</div>




<!-- 基本资料编辑 -->
<template id="articleList">
	<el-col :span="20" class="main article">
		<h2>{{tit}}</h2>
		<div class="article_ctr fix">
			<el-form inline :model="searchForm" class="fr">
				<el-form-item>
					<el-date-picker v-model="searchForm.date" type="daterange" :editable="false" start-placeholder="开始日期" end-placeholder="结束日期"></el-date-picker>
				</el-form-item>
				<el-form-item>
					<el-select v-model="searchForm.status" placeholder="文章状态">
						<el-option label="全部" :value="0"></el-option>
						<el-option label="隐藏" :value="1"></el-option>
						<el-option label="显示" :value="2"></el-option>
					</el-select>
				</el-form-item>
				<el-form-item>
					<el-input placeholder="请输入内容" v-model="searchForm.val">
						<el-select v-model="searchForm.type" slot="prepend" placeholder="请选择">
							<el-option label="标题" value="tit"></el-option>
							<el-option label="标签" value="tag"></el-option>
						</el-select>
						<el-button slot="append" icon="el-icon-search" @click="getList()"></el-button>
					</el-input>
				</el-form-item>
			</el-form>
			<el-dropdown trigger="click">
				<el-button type="primary">批量操作<i class="el-icon-caret-bottom el-icon--right"></i></el-button>
				<el-dropdown-menu slot="dropdown">
					<el-dropdown-item  :command="1">隐藏</el-dropdown-item>
					<el-dropdown-item  :command="2">删除</el-dropdown-item>
				</el-dropdown-menu>
			</el-dropdown>
			<el-button type="primary" plain>发布新文章</el-button>
		</div>
		<div class="article_list">
			<el-radio-group v-model="searchForm.sort" size="mini">
				<el-radio-button label="1"><i class="el-icon-d-caret"></i>&nbsp;按时间排序</el-radio-button>
				<el-radio-button label="2"><i class="el-icon-d-caret"></i>&nbsp;按浏览量排序</el-radio-button>
			</el-radio-group>
			<el-table :data="tableData" border size="small" @selection-change="selection">
				<el-table-column type="selection"></el-table-column>
				<el-table-column prop="date" label="发布时间"></el-table-column>
				<el-table-column prop="tit" label="标题"></el-table-column>
				<el-table-column prop="tag" label="标签"></el-table-column>
				<el-table-column prop="PV" label="浏览量"></el-table-column>
				<el-table-column prop="status" label="状态"></el-table-column>
				<el-table-column label="操作">
					<template slot-scope="scope">
						<el-button size="small" @click="hideArticle(scope.row)">隐藏</el-button>
						<el-button size="small" @click="showArticle(scope.row)">显示</el-button>
						<el-popover width="160">
							<p>确定删除该文章吗？</p>
							<div class="tr">
								<el-button size="mini" type="text"  @click="document.body.click()">取消</el-button>
								<el-button size="mini" type="primary" @click="delUser(scope.row)">确定</el-button>
							</div>
							<el-button size="small" type="danger" slot="reference">删除</el-button>
						</el-popover>
					</template>
				</el-table-column>
			</el-table>
			<div class="pagination">
				<el-pagination layout="prev,pager,next,total" :page-size="pageSize" :total="pageNo" @current-change="pageChange"></el-pagination>
			</div>
		</div>
	</el-col>
</template>



<!-- 密码修改 -->
<template id="articleEdit">
	<el-form ref="editPass" :model="editPass" :rules="rules" label-width="80px">
		<el-form-item label="原密码" prop="pass" :rules="[{ required: true, message: '请输入原密码' }]">
			<el-input type="password" v-model="editPass.pass"></el-input>
		</el-form-item>
		<el-form-item label="新密码" prop="newPass">
			<el-tooltip content="必填,6-32位数字或字母" placement="right">
				<el-input type="password" v-model="editPass.newPass"></el-input>
			</el-tooltip>
		</el-form-item>
		<el-form-item label="确认密码" prop="checkPass">
			<el-input type="password" v-model="editPass.checkPass"></el-input>
		</el-form-item>
		<el-form-item>
			<el-button type="primary" :disabled="onEdit" @click="submitForm">确认</el-button>
		</el-form-item>
	</el-form>
</template>


</body>
</html>
